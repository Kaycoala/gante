<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>Gante | Painel Administrativo</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üç®</text></svg>">
</head>
<body class="admin-body">

  <!-- ========== LOGIN ========== -->
  <div class="admin-login" id="adminLogin">
    <div class="admin-login-card">
      <div class="nav-logo font-accent">Gante</div>
      <h2>Painel Administrativo</h2>
      <p>Digite a senha para acessar o painel de gerenciamento.</p>
      <div class="login-error" id="loginError">Senha incorreta. Tente novamente.</div>
      <form id="loginForm" style="text-align:left;">
        <div class="form-group">
          <label for="loginPassword">Senha</label>
          <input type="password" id="loginPassword" placeholder="Digite a senha" required autofocus>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%;">Entrar</button>
      </form>
      <p style="margin-top:20px; font-size:0.85rem;">
        <a href="index.html" style="color:var(--color-gold); font-weight:600;">Voltar ao site</a>
      </p>
    </div>
  </div>

  <!-- ========== DASHBOARD ========== -->
  <div class="admin-dashboard" id="adminDashboard">

    <!-- Mobile Toggle -->
    <button class="admin-mobile-toggle" id="sidebarToggle" aria-label="Menu">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
    </button>

    <!-- Sidebar -->
    <aside class="admin-sidebar" id="adminSidebar">
      <div class="admin-sidebar-logo">
        <a href="index.html" class="nav-logo">Gante</a>
        <small>Painel Admin</small>
      </div>
      <nav class="admin-nav">
        <button class="admin-nav-item active" data-view="gelatos">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>
          Gelatos
        </button>
        <button class="admin-nav-item" data-view="chocolates">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 3v18"/></svg>
          Chocolates
        </button>
        <button class="admin-nav-item" data-view="diversos">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg>
          Diversos
        </button>
        <button class="admin-nav-item" data-view="categorias">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 6h16M4 10h16M4 14h16M4 18h16"/></svg>
          Categorias
        </button>
        <button class="admin-nav-item" data-view="tamanhos">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/></svg>
          Tamanhos
        </button>
        <button class="admin-nav-item" data-view="coberturas">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/><path d="M8 12l2 2 4-4"/></svg>
          Coberturas
        </button>
        <button class="admin-nav-item" data-view="caixas">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 8l-2-4H5L3 8m18 0v10a2 2 0 01-2 2H5a2 2 0 01-2-2V8m18 0H3m9 4v4m-2-2h4"/></svg>
          Caixas
        </button>
      </nav>
      <div class="admin-sidebar-footer">
        <button class="admin-nav-item" id="logoutBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"/></svg>
          Sair
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="admin-main" id="adminMain">

      <!-- ---- GELATOS VIEW ---- -->
      <div class="admin-view active" id="viewGelatos">
        <div class="admin-header">
          <h1>Gelatos</h1>
          <div class="admin-header-actions">
            <button class="btn btn-primary btn-sm" id="addGelatoBtn">+ Novo Gelato</button>
          </div>
        </div>
        <div class="admin-table-wrap">
          <div class="admin-table-header">
            <input type="text" class="admin-table-search" id="gelatoSearch" placeholder="Buscar gelatos...">
          </div>
          <table class="admin-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Categoria</th>
                <th>Preco</th>
                <th>Acoes</th>
              </tr>
            </thead>
            <tbody id="gelatoTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- ---- CHOCOLATES VIEW ---- -->
      <div class="admin-view" id="viewChocolates" style="display:none;">
        <div class="admin-header">
          <h1>Chocolates</h1>
          <div class="admin-header-actions">
            <button class="btn btn-primary btn-sm" id="addChocolateBtn">+ Novo Chocolate</button>
          </div>
        </div>
        <div class="admin-table-wrap">
          <div class="admin-table-header">
            <input type="text" class="admin-table-search" id="chocolateSearch" placeholder="Buscar chocolates...">
          </div>
          <table class="admin-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Categoria</th>
                <th>Preco</th>
                <th>Acoes</th>
              </tr>
            </thead>
            <tbody id="chocolateTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- ---- DIVERSOS VIEW ---- -->
      <div class="admin-view" id="viewDiversos" style="display:none;">
        <div class="admin-header">
          <h1>Diversos</h1>
          <div class="admin-header-actions">
            <button class="btn btn-primary btn-sm" id="addDiversosBtn">+ Novo Item</button>
          </div>
        </div>
        <div class="admin-table-wrap">
          <div class="admin-table-header">
            <input type="text" class="admin-table-search" id="diversosSearch" placeholder="Buscar diversos...">
          </div>
          <table class="admin-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Descricao</th>
                <th>Preco</th>
                <th>Acoes</th>
              </tr>
            </thead>
            <tbody id="diversosTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- ---- CATEGORIAS VIEW ---- -->
      <div class="admin-view" id="viewCategorias" style="display:none;">
        <div class="admin-header">
          <h1>Categorias</h1>
        </div>
        <div style="display:flex; gap:24px; flex-wrap:wrap;">
          <!-- Gelato Categories -->
          <div class="admin-table-wrap" style="flex:1; min-width:300px;">
            <div class="admin-table-header">
              <strong>Categorias de Gelato</strong>
              <button class="btn btn-primary btn-sm" id="addGelatoCatBtn">+ Nova</button>
            </div>
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>ID</th>
                  <th>Acoes</th>
                </tr>
              </thead>
              <tbody id="gelatoCatBody"></tbody>
            </table>
          </div>
          <!-- Chocolate Categories -->
          <div class="admin-table-wrap" style="flex:1; min-width:300px;">
            <div class="admin-table-header">
              <strong>Categorias de Chocolate</strong>
              <button class="btn btn-primary btn-sm" id="addChocoCatBtn">+ Nova</button>
            </div>
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>ID</th>
                  <th>Acoes</th>
                </tr>
              </thead>
              <tbody id="chocoCatBody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ---- TAMANHOS VIEW ---- -->
      <div class="admin-view" id="viewTamanhos" style="display:none;">
        <div class="admin-header">
          <h1>Tamanhos de Gelato</h1>
          <div class="admin-header-actions">
            <button class="btn btn-primary btn-sm" id="addSizeBtn">+ Novo Tamanho</button>
          </div>
        </div>
        <div class="admin-table-wrap">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Sabores</th>
                <th>Preco</th>
                <th>Ordem</th>
                <th>Acoes</th>
              </tr>
            </thead>
            <tbody id="sizesTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- ---- COBERTURAS VIEW ---- -->
      <div class="admin-view" id="viewCoberturas" style="display:none;">
        <div class="admin-header">
          <h1>Coberturas</h1>
          <div class="admin-header-actions">
            <button class="btn btn-primary btn-sm" id="addToppingBtn">+ Nova Cobertura</button>
          </div>
        </div>
        <div class="admin-table-wrap">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Preco</th>
                <th>Acoes</th>
              </tr>
            </thead>
            <tbody id="toppingsTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- ---- CAIXAS VIEW ---- -->
      <div class="admin-view" id="viewCaixas" style="display:none;">
        <div class="admin-header">
          <h1>Caixas de Chocolate</h1>
          <div class="admin-header-actions">
            <button class="btn btn-primary btn-sm" id="addBoxBtn">+ Nova Caixa</button>
          </div>
        </div>
        <div class="admin-table-wrap">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Unidades</th>
                <th>Preco</th>
                <th>Acoes</th>
              </tr>
            </thead>
            <tbody id="boxesTableBody"></tbody>
          </table>
        </div>
      </div>

    </main>
  </div>

  <!-- ========== PRODUCT MODAL ========== -->
  <div class="modal-overlay" id="productModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="productModalTitle">Novo Produto</h3>
        <button class="modal-close" id="productModalClose" aria-label="Fechar">&times;</button>
      </div>
      <form class="admin-form" id="productForm">
        <input type="hidden" id="prodEditId">
        <input type="hidden" id="prodEditType">
        <div class="form-group">
          <label for="prodName">Nome</label>
          <input type="text" id="prodName" placeholder="Nome do produto" required>
        </div>
        <div class="form-group">
          <label for="prodDescription">Descricao</label>
          <textarea id="prodDescription" placeholder="Descricao do produto" required></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="prodPrice">Preco (R$)</label>
            <input type="number" id="prodPrice" step="0.01" min="0" placeholder="0.00" required>
          </div>
          <div class="form-group">
            <label for="prodCategory">Categoria</label>
            <select id="prodCategory" required></select>
          </div>
        </div>
        <div class="form-group">
          <label for="prodImageFile">Arquivo da Imagem</label>
          <input type="text" id="prodImageFile" placeholder="Ex: stracciatella.jpg">
          <small style="display:block; margin-top:4px; color:rgba(15,59,46,0.5); font-size:0.8rem;">
            Coloque a imagem na pasta <code style="background:rgba(232,217,197,0.5); padding:1px 6px; border-radius:3px;">images/produtos/</code> e digite o nome do arquivo com extensao (ex: pistacchio.png, brigadeiro.webp)
          </small>
          <div id="imagePreviewWrap" style="display:none; margin-top:12px; text-align:center;">
            <img id="imagePreview" alt="Preview" style="max-height:150px; border-radius:8px; margin:0 auto;">
          </div>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%;">Salvar</button>
      </form>
    </div>
  </div>

  <!-- ========== DIVERSOS MODAL ========== -->
  <div class="modal-overlay" id="diversosModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="diversosModalTitle">Novo Item Diverso</h3>
        <button class="modal-close" id="diversosModalClose" aria-label="Fechar">&times;</button>
      </div>
      <form class="admin-form" id="diversosForm">
        <input type="hidden" id="divEditId">
        <div class="form-group">
          <label for="divName">Nome</label>
          <input type="text" id="divName" placeholder="Nome do item" required>
        </div>
        <div class="form-group">
          <label for="divDescription">Descricao</label>
          <textarea id="divDescription" placeholder="Descricao do item" required></textarea>
        </div>
        <div class="form-group">
          <label for="divPrice">Preco (R$)</label>
          <input type="number" id="divPrice" step="0.01" min="0" placeholder="0.00" required>
        </div>
        <div class="form-group">
          <label for="divImageFile">Arquivo da Imagem</label>
          <input type="text" id="divImageFile" placeholder="Ex: casquinha.jpg">
          <small style="display:block; margin-top:4px; color:rgba(15,59,46,0.5); font-size:0.8rem;">
            Coloque a imagem na pasta <code style="background:rgba(232,217,197,0.5); padding:1px 6px; border-radius:3px;">images/produtos/</code> e digite o nome do arquivo.
          </small>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%;">Salvar</button>
      </form>
    </div>
  </div>

  <!-- ========== CATEGORY MODAL ========== -->
  <div class="modal-overlay" id="categoryModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="categoryModalTitle">Nova Categoria</h3>
        <button class="modal-close" id="categoryModalClose" aria-label="Fechar">&times;</button>
      </div>
      <form class="admin-form" id="categoryForm">
        <input type="hidden" id="catEditId">
        <input type="hidden" id="catEditType">
        <div class="form-group">
          <label for="catName">Nome da Categoria</label>
          <input type="text" id="catName" placeholder="Nome da categoria" required>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%;">Salvar</button>
      </form>
    </div>
  </div>

  <!-- ========== SIZE MODAL ========== -->
  <div class="modal-overlay" id="sizeModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="sizeModalTitle">Novo Tamanho</h3>
        <button class="modal-close" id="sizeModalClose" aria-label="Fechar">&times;</button>
      </div>
      <form class="admin-form" id="sizeForm">
        <input type="hidden" id="sizeEditId">
        <div class="form-group">
          <label for="sizeName">Nome</label>
          <input type="text" id="sizeName" placeholder="Ex: Grande" required>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="sizeBalls">Qtd. Sabores</label>
            <input type="number" id="sizeBalls" min="1" placeholder="1" required>
          </div>
          <div class="form-group">
            <label for="sizePrice">Preco (R$)</label>
            <input type="number" id="sizePrice" step="0.01" min="0" placeholder="0.00" required>
          </div>
        </div>
        <div class="form-group">
          <label for="sizeSortOrder">Ordem de Exibicao</label>
          <input type="number" id="sizeSortOrder" min="0" placeholder="0">
          <small style="display:block; margin-top:4px; color:rgba(15,59,46,0.5); font-size:0.8rem;">Numero menor aparece primeiro no site.</small>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%;">Salvar</button>
      </form>
    </div>
  </div>

  <!-- ========== TOPPING MODAL ========== -->
  <div class="modal-overlay" id="toppingModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="toppingModalTitle">Nova Cobertura</h3>
        <button class="modal-close" id="toppingModalClose" aria-label="Fechar">&times;</button>
      </div>
      <form class="admin-form" id="toppingForm">
        <input type="hidden" id="toppingEditId">
        <div class="form-group">
          <label for="toppingName">Nome</label>
          <input type="text" id="toppingName" placeholder="Ex: Calda de Chocolate" required>
        </div>
        <div class="form-group">
          <label for="toppingPrice">Preco (R$)</label>
          <input type="number" id="toppingPrice" step="0.01" min="0" placeholder="0.00" required>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%;">Salvar</button>
      </form>
    </div>
  </div>

  <!-- ========== BOX MODAL ========== -->
  <div class="modal-overlay" id="boxModal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="boxModalTitle">Nova Caixa</h3>
        <button class="modal-close" id="boxModalClose" aria-label="Fechar">&times;</button>
      </div>
      <form class="admin-form" id="boxForm">
        <input type="hidden" id="boxEditId">
        <div class="form-group">
          <label for="boxName">Nome</label>
          <input type="text" id="boxName" placeholder="Ex: Caixa Grande" required>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="boxUnits">Unidades</label>
            <input type="number" id="boxUnits" min="1" placeholder="6" required>
          </div>
          <div class="form-group">
            <label for="boxPrice">Preco (R$)</label>
            <input type="number" id="boxPrice" step="0.01" min="0" placeholder="0.00" required>
          </div>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100%;">Salvar</button>
      </form>
    </div>
  </div>

  <!-- ========== DELETE CONFIRM MODAL ========== -->
  <div class="modal-overlay" id="deleteModal">
    <div class="modal" style="max-width:400px; text-align:center;">
      <div style="padding:12px 0;">
        <div style="width:56px;height:56px;border-radius:50%;background:rgba(192,57,43,0.1);display:flex;align-items:center;justify-content:center;margin:0 auto 16px;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#C0392B" stroke-width="1.5"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
        </div>
        <h3 style="margin-bottom:8px;">Confirmar Exclusao</h3>
        <p id="deleteMessage" style="margin-bottom:24px;">Tem certeza que deseja excluir este item?</p>
        <div style="display:flex; gap:12px; justify-content:center;">
          <button class="btn btn-sm" id="deleteCancelBtn" style="background:rgba(15,59,46,0.08); color:var(--color-primary);">Cancelar</button>
          <button class="btn btn-sm" id="deleteConfirmBtn" style="background:var(--color-error); color:#fff;">Excluir</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast toast-success" id="toast"></div>

  <!-- ========== SUPABASE SDK ========== -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Scripts -->
  <script src="js/data.js"></script>
  <script src="js/supabase-config.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/admin.js"></script>

</body>
</html>
